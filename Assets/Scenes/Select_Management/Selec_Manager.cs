using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Selec_Manager : MonoBehaviour
{
	// Start is called before the first frame update

	[SerializeField, Range(0, 10)]
	float time = 1;

	[SerializeField]
	Vector3 endPosition;

	//[SerializeField]
	//AnimationCurve curve;

	private float startTime; // 処理の開始時間(startTime)を記録
	private Vector3 startPosition;

	void OnEnable()
	{
		if (time <= 0)
		{
			transform.position = endPosition;
			enabled = false;
			return;
		}

		startTime = Time.timeSinceLevelLoad;
		startPosition = transform.position;
	}

	void Update()
	{
		//経過時間(diff)を求めて、予定時間（time)で割れば時間に対する進行率
				var diff = Time.timeSinceLevelLoad - startTime;
		if (diff > time)
		{
			transform.position = endPosition;
			enabled = false;
		}

		var rate = diff / time;
		//var pos = curve.Evaluate(rate);

		transform.position = Vector3.Lerp(startPosition, endPosition, rate);
		//transform.position = Vector3.Lerp (startPosition, endPosition, pos);
	}

	void OnDrawGizmosSelected()
	{
#if UNITY_EDITOR

		if (!UnityEditor.EditorApplication.isPlaying || enabled == false)
		{
			startPosition = transform.position;
		}

		UnityEditor.Handles.Label(endPosition, endPosition.ToString());
		UnityEditor.Handles.Label(startPosition, startPosition.ToString());
#endif
		Gizmos.DrawSphere(endPosition, 0.1f);
		Gizmos.DrawSphere(startPosition, 0.1f);

		Gizmos.DrawLine(startPosition, endPosition);
	}
}
